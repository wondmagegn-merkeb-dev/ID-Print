// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String          @id @default(cuid())
  name             String
  email            String          @unique
  phone            String          @unique
  password         String
  role             String          @default("User") // "User" or "Admin"
  status           String          @default("Active") // "Active" or "Inactive"
  avatar           String?
  isChangePassword Boolean         @default(false)
  invitedBySource  String          @default("SELF") // "SELF", "ADMIN", "USER"
  invitedById      String?
  invitedBy        User?           @relation("UserReferrals", fields: [invitedById], references: [id], onDelete: NoAction, onUpdate: NoAction)
  referrals        User[]          @relation("UserReferrals")
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  Package          Package?        @relation(fields: [packageId], references: [id])
  packageId        String?
}

model Package {
  id            String   @id @default(cuid())
  name          String   @unique
  price         String // Can be "$X/month" or "Custom"
  pdfMerges     Int
  idGenerations Int
  popular       Boolean  @default(false)
  users         User[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
